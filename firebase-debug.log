[debug] [2019-07-30T03:41:32.572Z] ----------------------------------------------------------------------
[debug] [2019-07-30T03:41:32.577Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\walla\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy
[debug] [2019-07-30T03:41:32.578Z] CLI Version:   7.1.1
[debug] [2019-07-30T03:41:32.578Z] Platform:      win32
[debug] [2019-07-30T03:41:32.578Z] Node Version:  v10.14.1
[debug] [2019-07-30T03:41:32.581Z] Time:          Mon Jul 29 2019 22:41:32 GMT-0500 (GMT-05:00)
[debug] [2019-07-30T03:41:32.581Z] ----------------------------------------------------------------------
[debug] 
[debug] [2019-07-30T03:41:32.602Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2019-07-30T03:41:32.604Z] > authorizing via signed-in user
[debug] [2019-07-30T03:41:32.604Z] [iam] checking project app-tokpets-dev for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get","firebasedatabase.instances.update","firebasehosting.sites.update","firebaserules.releases.create","firebaserules.releases.update","firebaserules.rulesets.create"]
[debug] [2019-07-30T03:41:32.608Z] >>> HTTP REQUEST POST https://cloudresourcemanager.googleapis.com/v1/projects/app-tokpets-dev:testIamPermissions  

[debug] [2019-07-30T03:41:33.748Z] <<< HTTP RESPONSE 200
[debug] [2019-07-30T03:41:33.752Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/app-tokpets-dev  
 
[debug] [2019-07-30T03:41:34.419Z] <<< HTTP RESPONSE 200
[info] 
[info] === Deploying to 'app-tokpets-dev'...
[info] 
[info] i  deploying database, storage, firestore, functions, hosting
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script.
[info] i  database: checking rules syntax...
[debug] [2019-07-30T03:41:56.455Z] >>> HTTP REQUEST PUT https://app-tokpets-dev.firebaseio.com/.settings/rules.json?dryRun=true  
 {
  "rules": {
    ".read": false,
    ".write": false
  }
}
[debug] [2019-07-30T03:41:58.002Z] <<< HTTP RESPONSE 200
[info] +  database: rules syntax for database app-tokpets-dev is valid
[debug] [2019-07-30T03:41:58.003Z] >>> HTTP REQUEST GET https://appengine.googleapis.com/v1/apps/app-tokpets-dev  
 
[debug] [2019-07-30T03:41:59.884Z] <<< HTTP RESPONSE 200
[info] i  storage: checking ./server/storage/storage.rules for compilation errors...
[debug] [2019-07-30T03:41:59.886Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/app-tokpets-dev:test  

[debug] [2019-07-30T03:42:00.759Z] <<< HTTP RESPONSE 200
[info] +  storage: rules file ./server/storage/storage.rules compiled successfully
[info] i  firestore: checking ./server/database/firestore.rules for compilation errors...
[info] i  firestore: reading indexes from ./server/database/firestore.indexes.json...
[debug] [2019-07-30T03:42:00.765Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/app-tokpets-dev:test  

[debug] [2019-07-30T03:42:01.207Z] <<< HTTP RESPONSE 200
[info] +  firestore: rules file ./server/database/firestore.rules compiled successfully
[debug] [2019-07-30T03:42:01.211Z] > [functions] package.json contents: {
  "name": "functions",
  "scripts": {
    "lint": "tslint --project tsconfig.json",
    "build": "tsc",
    "serve": "npm run build && firebase serve --only functions",
    "shell": "npm run build && firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "8"
  },
  "main": "lib/index.js",
  "dependencies": {
    "firebase-admin": "^8.0.0",
    "firebase-functions": "^3.1.0"
  },
  "devDependencies": {
    "tslint": "^5.12.0",
    "typescript": "^3.2.2"
  },
  "private": true
}
[info] i  functions: ensuring necessary APIs are enabled...
[debug] [2019-07-30T03:42:01.213Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/app-tokpets-dev/services/cloudfunctions.googleapis.com  
 
[debug] [2019-07-30T03:42:01.214Z] >>> HTTP REQUEST GET https://serviceusage.googleapis.com/v1/projects/app-tokpets-dev/services/runtimeconfig.googleapis.com  
 
[debug] [2019-07-30T03:42:02.824Z] <<< HTTP RESPONSE 200
[debug] [2019-07-30T03:42:03.070Z] <<< HTTP RESPONSE 200
[info] +  functions: all necessary APIs are enabled
[debug] [2019-07-30T03:42:03.071Z] >>> HTTP REQUEST GET https://firebase.googleapis.com/v1beta1/projects/app-tokpets-dev/adminSdkConfig  
 
[debug] [2019-07-30T03:42:04.053Z] <<< HTTP RESPONSE 200
[debug] [2019-07-30T03:42:04.055Z] >>> HTTP REQUEST POST https://firebasehosting.googleapis.com/v1beta1/sites/app-tokpets-dev/versions  

[debug] [2019-07-30T03:42:06.277Z] <<< HTTP RESPONSE 200
[info] i  storage: uploading rules ./server/storage/storage.rules...
[debug] [2019-07-30T03:42:06.278Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/app-tokpets-dev/rulesets  

[debug] [2019-07-30T03:42:06.867Z] <<< HTTP RESPONSE 200
[debug] [2019-07-30T03:42:06.868Z] [rules] created ruleset projects/app-tokpets-dev/rulesets/2b4c6ace-db49-4f37-8a97-2e70533df5c2
[info] i  firestore: uploading rules ./server/database/firestore.rules...
[debug] [2019-07-30T03:42:06.870Z] >>> HTTP REQUEST POST https://firebaserules.googleapis.com/v1/projects/app-tokpets-dev/rulesets  

[debug] [2019-07-30T03:42:06.871Z] >>> HTTP REQUEST GET https://firestore.googleapis.com/v1beta2/projects/app-tokpets-dev/databases/(default)/collectionGroups/-/indexes  
 
[debug] [2019-07-30T03:42:07.708Z] <<< HTTP RESPONSE 200
[debug] [2019-07-30T03:42:07.708Z] [rules] created ruleset projects/app-tokpets-dev/rulesets/43f10853-c497-449d-8ed8-43239bb0ba22
[debug] [2019-07-30T03:42:08.241Z] <<< HTTP RESPONSE 200
[debug] [2019-07-30T03:42:08.242Z] >>> HTTP REQUEST GET https://firestore.googleapis.com/v1beta2/projects/app-tokpets-dev/databases/(default)/collectionGroups/-/fields?filter=indexConfig.usesAncestorConfig=false  
 
[debug] [2019-07-30T03:42:09.519Z] <<< HTTP RESPONSE 200
[info] +  firestore: deployed indexes in ./server/database/firestore.indexes.json successfully
[info] i  functions: preparing ./server/functions directory for uploading...
[debug] [2019-07-30T03:42:09.522Z] >>> HTTP REQUEST GET https://runtimeconfig.googleapis.com/v1beta1/projects/app-tokpets-dev/configs  
 
[debug] [2019-07-30T03:42:10.945Z] <<< HTTP RESPONSE 200
[info] i  functions: packaged ./server/functions (32.32 KB) for uploading
[debug] [2019-07-30T03:42:11.402Z] >>> HTTP REQUEST POST https://cloudfunctions.googleapis.com/v1/projects/app-tokpets-dev/locations/us-central1/functions:generateUploadUrl  
 
[debug] [2019-07-30T03:42:12.662Z] <<< HTTP RESPONSE 500
[debug] [2019-07-30T03:42:12.662Z] <<< HTTP RESPONSE BODY {
  "error": {
    "code": 500,
    "message": "The service has encountered an internal error. Please try again later",
    "status": "INTERNAL"
  }
}

[info] 

There was an issue deploying your functions. Verify that your project has a Google App Engine instance setup at https://console.cloud.google.com/appengine and try again. If this issue persists, please contact support.
[warn] !  functions: Upload Error: HTTP Error: 500, The service has encountered an internal error. Please try again later
[error] 
[error] Error: HTTP Error: 500, The service has encountered an internal error. Please try again later
[debug] [2019-07-30T03:42:13.565Z] Error Context: {
  "body": {
    "error": {
      "code": 500,
      "message": "The service has encountered an internal error. Please try again later",
      "status": "INTERNAL"
    }
  },
  "response": {
    "statusCode": 500,
    "body": "{\n  \"error\": {\n    \"code\": 500,\n    \"message\": \"The service has encountered an internal error. Please try again later\",\n    \"status\": \"INTERNAL\"\n  }\n}\n",
    "headers": {
      "vary": "X-Origin, Referer, Origin,Accept-Encoding",
      "content-type": "application/json; charset=UTF-8",
      "date": "Tue, 30 Jul 2019 03:42:13 GMT",
      "server": "ESF",
      "cache-control": "private",
      "x-xss-protection": "0",
      "x-frame-options": "SAMEORIGIN",
      "x-content-type-options": "nosniff",
      "alt-svc": "quic=\":443\"; ma=2592000; v=\"46,43,39\"",
      "accept-ranges": "none",
      "transfer-encoding": "chunked"
    },
    "request": {
      "uri": {
        "protocol": "https:",
        "slashes": true,
        "auth": null,
        "host": "cloudfunctions.googleapis.com",
        "port": 443,
        "hostname": "cloudfunctions.googleapis.com",
        "hash": null,
        "search": null,
        "query": null,
        "pathname": "/v1/projects/app-tokpets-dev/locations/us-central1/functions:generateUploadUrl",
        "path": "/v1/projects/app-tokpets-dev/locations/us-central1/functions:generateUploadUrl",
        "href": "https://cloudfunctions.googleapis.com/v1/projects/app-tokpets-dev/locations/us-central1/functions:generateUploadUrl"
      },
      "method": "POST"
    }
  }
}
